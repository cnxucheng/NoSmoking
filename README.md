# 戒烟记录管理应用

一个基于Vue 3和IndexedDB的抽烟记录管理网页应用，帮助用户记录和管理抽烟行为，提供戒烟计时器和数据统计功能。

## 功能特性

### 🕒 戒烟计时器
- 实时显示距离上一次抽烟的时间
- 动态更新的鼓励文案
- 彩色进度条显示戒烟进度
- 每分钟自动更新

### 📊 今日统计
- 显示今日抽烟数量
- 计算今日抽烟花费
- 统计节省的支数

### 🚬 香烟管理
- 添加、编辑、删除香烟品牌
- 设置香烟价格和库存
- 库存预警显示
- 按时间排序

### 📝 记录查询
- 按时间倒序显示所有记录
- 支持按类型筛选（抽烟/分烟/接烟）
- 记录详情查看
- 相对时间显示

### 📈 数据统计
- 周/月统计切换
- 抽烟趋势图表
- 记录类型分布
- 详细统计数据

## 记录类型说明

### 抽烟
- 减少香烟库存
- 记录价格
- 增加抽烟数量统计
- 重置戒烟计时器

### 分烟
- 减少香烟库存
- 记录价格
- 不增加抽烟数量统计
- 不影响戒烟计时器

### 接烟
- 不减少库存
- 不记录价格
- 增加抽烟数量统计
- 重置戒烟计时器

## 技术栈

- **前端框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **UI组件库**: Vant 4
- **日期处理**: Day.js
- **数据存储**: IndexedDB
- **路由管理**: Vue Router

## 项目结构

```
src/
├── components/          # 公共组件
│   └── QuitTimer.vue   # 戒烟计时器组件
├── views/              # 页面组件
│   ├── HomeView.vue    # 首页
│   ├── CigarettesView.vue  # 香烟管理页
│   ├── RecordsView.vue     # 记录查询页
│   └── StatsView.vue       # 数据统计页
├── utils/              # 工具类
│   └── db.ts          # IndexedDB数据库操作

├── router/             # 路由配置
├── App.vue            # 根组件
└── main.ts            # 入口文件
```

## 安装和运行

1. 安装依赖：
```bash
npm install
```

2. 启动开发服务器：
```bash
npm run dev
```

3. 构建生产版本：
```bash
npm run build
```

## 使用说明

1. **首次使用**：应用会自动初始化示例数据
2. **添加香烟**：在香烟管理页面添加您常用的香烟品牌
3. **记录抽烟**：在首页使用快速记录按钮记录抽烟行为
4. **查看统计**：在统计页面查看您的抽烟趋势和统计数据
5. **管理记录**：在记录查询页面查看和管理所有记录

## 数据存储

所有数据都存储在浏览器的IndexedDB中，包括：
- 香烟品牌信息（名称、价格、库存）
- 抽烟记录（时间、类型、香烟品牌）
- 应用会自动初始化示例数据供体验

## 移动端适配

应用已针对移动端进行优化，支持：
- 375px-414px宽度的手机屏幕
- 触摸友好的按钮大小
- 响应式布局设计
- 清晰的视觉层次

## 开发说明

### 数据库设计
- **cigarettes表**：存储香烟品牌信息
- **records表**：存储抽烟记录
- 支持基本的CRUD操作
- 提供时间范围查询功能

### 核心业务逻辑
- 戒烟计时器基于最新抽烟/接烟记录计算
- 不同类型记录有不同的业务逻辑
- 数据统计支持周/月切换

## 许可证

MIT License
